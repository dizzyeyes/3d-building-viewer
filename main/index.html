<!DOCTYPE html>
<html lang="en">
    <head>
        <title>3D Building Viewer</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        
        <link rel="stylesheet" href="css/demo.css" />
    </head>
    <body >

        <script src="jquery-2.1.3.js"></script>
        
        <script src="libs/THREEx.KeyboardState.js"></script>
        <script src="libs/THREEx.FullScreen.js"></script>
        
        
        <link rel="stylesheet" href="css/bootstrap-menu.css" />
        <script src="libs/bootstrap-prompts-alert.js"></script>
        <script src="libs/bootstrap-menu.js"></script>
            

        <script src="three.71.min.js"></script>
        <script src="js/ext_three.js"></script>
                
        <script src="libs/FileSaver.js"></script>
        <script src="libs/jszip.min.js"></script>
        <script src="libs/stats.min.js"></script>
        <script src="libs/OBJLoader.js"></script>
        <script src="libs/CombinedCamera.js"></script>
        <script src="libs/Projector.js"></script>
        <script src="libs/Detector.js"></script>


        <script src="js/BdViewer/tools/fadeInFadeOut.js"></script>
        
        <script src="js/BdViewer/tools/popUpMenu.js"></script>
        <script src="js/BdViewer/tools/popUpMenu/popmenuProcess.js"></script>
        
        <script src="js/BdViewer/tools/alertMsgTool.js"></script>
        
        <link rel='stylesheet' href='css/notify/libnotify.css'/>
        <script src="libs/humane.min.js"></script> 
        
        <div id="bubble_tooltip">
            <div class="bubble_top"><span></span></div>
            <div class="bubble_middle"><span id="bubble_tooltip_content">BubleTips.</span></div>
            <div class="bubble_bottom"></div>
        </div>        
        <link rel="stylesheet" href="css/bubble-tooltip.css" media="screen">
        <script type="text/javascript" src="js/BdViewer/tools/msgtools/bubble-tooltip.js"></script> 
        
        <script type="text/javascript" src="js/BdViewer/tools/msgtools/menuNotice.js"></script>
        <link href="css/menuNotice.css" rel="stylesheet" type="text/css" />
        <div id="menuDinfo" class="menuDinfo menuDMessage" onmouseover="hideMenuD()"></div>
        <div id="menuDerror" class="menuDerror menuDMessage" onmouseover="hideMenuD()"></div>
        <div id="menuDwarning" class="menuDwarning menuDMessage" onmouseover="hideMenuD()"></div>
        <div id="menuDsuccess" class="menuDsuccess menuDMessage" onmouseover="hideMenuD()"></div>        
        
        <div id="JQtooltip" style="display: none;"> </div> 
        <link rel="stylesheet" href="css/jQuery.toolTip.css" media="screen">
        <script type="text/javascript" src="js/BdViewer/tools/msgtools/callJQtoolTip.js"></script> 
        
        <script src="js/BdViewer/BdViewer.js"></script>
        <script src="js/BdViewer/tools/tools.js"></script>
        <script src="js/BdViewer/tools/events.js"></script>
        <script src="js/BdViewer/edit/changeAll.js"></script>
        <script src="js/BdViewer/edit/changeData.js"></script>
        <script src="js/BdViewer/edit/changeScene.js"></script>
        <script src="js/BdViewer/load/addBlock.js"></script>
        <script src="js/BdViewer/load/addMPoint.js"></script>
        <script src="js/BdViewer/load/loadfloor.js"></script>
        <script src="js/BdViewer/load/xmlparser.js"></script>
        <script src="js/BdViewer/classes/objList.js"></script>
        <script src="js/BdViewer/classes/group.js"></script>
        <script src="js/BdViewer/classes/brand.js"></script>
        <script src="js/BdViewer/classes/mpoint.js"></script>
        <script src="js/BdViewer/classes/block.js"></script>
        <script src="js/BdViewer/classes/floor.js"></script>
        <script src="js/BdViewer/classes/building.js"></script>
        <script src="js/BdViewer/classes/buildinglist.js"></script>
        
        <script src="js/BdViewer/controls/control.js"></script>
        <script src="js/BdViewer/controls/ext_TransformControls.js"></script>
        <script src="js/BdViewer/controls/ext_OrbitControls.js"></script>
        
        <script>
            if ( ! Detector.webgl ) Detector.addGetWebGLMessage();//check whether webgl is supported.
            
            var viewer = new BdViewer(document,'./data/BuildingList.xml');
            viewer.Init();
            var  msgTools=["jqTooltip",  "buble", "humane"];
            viewer.msgTool=msgTools[0];
            events();
            animate();
            
            function events(){
                document.addEventListener( 'mousemove', onDocumentMouseMove, false );
                document.addEventListener( 'dblclick', onDoubleClick, false );
                document.addEventListener( 'mousedown', onDocumentMouseDown, false );
                document.addEventListener( 'mouseup', onDocumentMouseUp, false );
                
                document.addEventListener( 'mousewheel', onMouseWheel, false );
                document.addEventListener( 'keydown', onKeyDown, false );
                document.addEventListener( 'keyup', onKeyUp, false );
                
                window.addEventListener( 'resize', onWindowResize, false );
            }
            
            function onWindowResize() {                    
                viewer.onWindowResize();
                
                viewer.fadeTool.MoveFloatLayer("table_add_template");
                viewer.fadeTool.MoveFloatLayer('table_manage');
                viewer.fadeTool.MoveFloatLayer('subtable_manage');
                
                $table.bootstrapTable('resetView');
                $sub_table.bootstrapTable('resetView');
            }

            function onKeyUp(event) {       
                viewer.onKeyUp(event);
            }
            
            function onKeyDown(event) {
                viewer.onKeyDown(event);
            }
            function onMouseWheel( event ) {
                viewer.onMouseWheel( event );
            }
            function onDocumentMouseMove( event ) {
                viewer.onDocumentMouseMove( event );
            }
            function onDoubleClick(event){
                viewer.onDoubleClick(event);
            }
            function onDocumentMouseDown( event ) {
                viewer.onDocumentMouseDown( event );
            }
            function onDocumentMouseUp( event ) {
                viewer.onDocumentMouseUp( event );
            }

            //
            function animate() {

                requestAnimationFrame( animate );
                render();
            }

            function render() {
                viewer.render();                
            }

        </script>
                
        
        
    </body>
    
</html>
